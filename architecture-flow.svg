<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1800">
  <defs>
    <style>
      /* Space Theme Colors */
      .box { fill: rgba(26, 11, 46, 0.9); stroke-width: 2; rx: 12; }
      .frontend { stroke: #b19cd9; filter: drop-shadow(0 0 8px rgba(177, 156, 217, 0.5)); }
      .backend { stroke: #9b59b6; filter: drop-shadow(0 0 8px rgba(155, 89, 182, 0.5)); }
      .database { stroke: #d8b2ff; filter: drop-shadow(0 0 8px rgba(216, 178, 255, 0.5)); }
      .ai { stroke: #e6e6fa; filter: drop-shadow(0 0 10px rgba(230, 230, 250, 0.6)); }
      .storage { stroke: #da70d6; filter: drop-shadow(0 0 8px rgba(218, 112, 214, 0.5)); }
      .text { fill: #e1d4ff; font-family: 'Segoe UI', Arial, sans-serif; font-size: 14px; text-anchor: middle; }
      .title { font-size: 15px; font-weight: 600; fill: #ffffff; }
      .arrow { stroke: #b19cd9; stroke-width: 2; fill: none; marker-end: url(#arrowhead); opacity: 0.8; }
      .label { fill: #b19cd9; font-size: 11px; font-style: italic; }
      .layer-title { font-size: 16px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; }
      .glow { filter: drop-shadow(0 0 15px rgba(177, 156, 217, 0.8)); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#b19cd9" />
    </marker>
    <!-- Gradient backgrounds -->
    <linearGradient id="spaceGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1a0b2e;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#2d1b4e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a0b2e;stop-opacity:1" />
    </linearGradient>
    <radialGradient id="starGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#b19cd9;stop-opacity:0" />
    </radialGradient>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#spaceGradient)"/>
  
  <!-- Decorative Stars -->
  <circle cx="50" cy="100" r="2" fill="#ffffff" opacity="0.8"/>
  <circle cx="150" cy="50" r="1.5" fill="#b19cd9" opacity="0.6"/>
  <circle cx="1300" cy="80" r="2" fill="#ffffff" opacity="0.7"/>
  <circle cx="1250" cy="150" r="1" fill="#d8b2ff" opacity="0.5"/>
  <circle cx="100" cy="300" r="1.5" fill="#ffffff" opacity="0.6"/>
  <circle cx="1350" cy="400" r="2" fill="#b19cd9" opacity="0.7"/>
  <circle cx="30" cy="600" r="1" fill="#ffffff" opacity="0.5"/>
  <circle cx="1380" cy="700" r="1.5" fill="#d8b2ff" opacity="0.6"/>
  <circle cx="80" cy="900" r="2" fill="#ffffff" opacity="0.7"/>
  <circle cx="1320" cy="1000" r="1" fill="#b19cd9" opacity="0.5"/>
  <circle cx="50" cy="1200" r="1.5" fill="#ffffff" opacity="0.6"/>
  <circle cx="1380" cy="1300" r="2" fill="#d8b2ff" opacity="0.7"/>
  <circle cx="120" cy="1500" r="1" fill="#ffffff" opacity="0.5"/>
  <circle cx="1280" cy="1600" r="1.5" fill="#b19cd9" opacity="0.6"/>

  <!-- Main Title -->
  <text x="700" y="35" class="text glow" style="font-size: 28px; font-weight: 700; fill: #d8b2ff; letter-spacing: 4px;">â­ KAAL SETHU â­</text>
  <text x="700" y="60" class="text" style="font-size: 16px; fill: #b19cd9; letter-spacing: 2px;">System Architecture</text>

  <!-- Layer 1: User Interface -->
  <text x="700" y="95" class="text layer-title" style="fill: #b19cd9;">ğŸŒŒ Frontend Layer</text>
  
  <!-- Index.html -->
  <rect x="50" y="110" width="180" height="85" class="box frontend"/>
  <text x="140" y="138" class="text title">index.html</text>
  <text x="140" y="158" class="text" style="font-size: 11px;">Landing Page</text>
  <text x="140" y="173" class="text" style="font-size: 11px;">Hero Animation</text>
  <text x="140" y="188" class="text" style="font-size: 11px;">Shooting Stars âœ¨</text>

  <!-- Second.html -->
  <rect x="270" y="110" width="180" height="85" class="box frontend"/>
  <text x="360" y="138" class="text title">second.html</text>
  <text x="360" y="158" class="text" style="font-size: 11px;">3D Galaxy (Three.js)</text>
  <text x="360" y="173" class="text" style="font-size: 11px;">Year Selection</text>
  <text x="360" y="188" class="text" style="font-size: 11px;">ğŸª Orbital UI</text>

  <!-- Feed Templates -->
  <rect x="490" y="110" width="180" height="85" class="box frontend"/>
  <text x="580" y="138" class="text title">Feed Templates</text>
  <text x="580" y="158" class="text" style="font-size: 11px;">1950s-2020s.html</text>
  <text x="580" y="173" class="text" style="font-size: 11px;">Dynamic Content</text>
  <text x="580" y="188" class="text" style="font-size: 11px;">ğŸ“… 8 Decades</text>

  <!-- Profile/Auth -->
  <rect x="710" y="110" width="180" height="85" class="box frontend"/>
  <text x="800" y="138" class="text title">Auth Pages</text>
  <text x="800" y="158" class="text" style="font-size: 11px;">profile.html</text>
  <text x="800" y="173" class="text" style="font-size: 11px;">Login/Signup</text>
  <text x="800" y="188" class="text" style="font-size: 11px;">ğŸ” Secure Access</text>

  <!-- Time Explorer -->
  <rect x="930" y="110" width="180" height="85" class="box frontend"/>
  <text x="1020" y="138" class="text title">time-explorer.html</text>
  <text x="1020" y="158" class="text" style="font-size: 11px;">Time Capsule</text>
  <text x="1020" y="173" class="text" style="font-size: 11px;">Creation Portal</text>
  <text x="1020" y="188" class="text" style="font-size: 11px;">ğŸ’« Messages</text>

  <!-- Arrows from Frontend to year-content-loader -->
  <path d="M 140 195 L 140 260" class="arrow"/>
  <path d="M 360 195 L 360 260" class="arrow"/>
  <path d="M 580 195 L 580 260" class="arrow"/>
  <path d="M 800 195 L 800 260" class="arrow"/>
  <path d="M 1020 195 L 1020 260" class="arrow"/>

  <!-- Layer 2: Client-side JavaScript -->
  <text x="700" y="250" class="text layer-title" style="fill: #b19cd9;">âš¡ Client-side JavaScript</text>

  <!-- year-content-loader.js -->
  <rect x="380" y="270" width="220" height="85" class="box frontend"/>
  <text x="490" y="298" class="text title">year-content-loader.js</text>
  <text x="490" y="318" class="text" style="font-size: 11px;">Detects ?year param</text>
  <text x="490" y="333" class="text" style="font-size: 11px;">Fetches AI content</text>
  <text x="490" y="348" class="text" style="font-size: 11px;">ğŸ”„ Updates DOM</text>

  <!-- auth.js -->
  <rect x="640" y="270" width="180" height="85" class="box frontend"/>
  <text x="730" y="298" class="text title">auth.js</text>
  <text x="730" y="318" class="text" style="font-size: 11px;">JWT Handling</text>
  <text x="730" y="333" class="text" style="font-size: 11px;">Auth State</text>
  <text x="730" y="348" class="text" style="font-size: 11px;">ğŸ”‘ Token Mgmt</text>

  <!-- Arrow to server -->
  <path d="M 490 355 L 490 420" class="arrow"/>
  <text x="510" y="395" class="label">API Requests</text>
  
  <path d="M 730 355 L 730 420" class="arrow"/>
  <text x="750" y="395" class="label">Auth Requests</text>

  <!-- Layer 3: Server -->
  <text x="700" y="410" class="text layer-title" style="fill: #9b59b6;">ğŸš€ Backend Layer (Node.js + Express)</text>

  <!-- server.js -->
  <rect x="480" y="430" width="440" height="85" class="box backend"/>
  <text x="700" y="458" class="text title">server.js</text>
  <text x="700" y="478" class="text" style="font-size: 11px;">Express Server (Port 3000)</text>
  <text x="700" y="493" class="text" style="font-size: 11px;">Routes Registration | Middleware | CORS</text>
  <text x="700" y="508" class="text" style="font-size: 11px;">ğŸŒ Static File Serving</text>

  <!-- Arrow to routes -->
  <path d="M 550 515 L 350 580" class="arrow"/>
  <path d="M 650 515 L 650 580" class="arrow"/>
  <path d="M 750 515 L 750 580" class="arrow"/>
  <path d="M 850 515 L 950 580" class="arrow"/>

  <!-- Layer 4: Routes -->
  <text x="700" y="570" class="text layer-title" style="fill: #9b59b6;">ğŸ›°ï¸ API Routes</text>

  <!-- auth.js route -->
  <rect x="50" y="590" width="180" height="85" class="box backend"/>
  <text x="140" y="618" class="text title">authRoutes.js</text>
  <text x="140" y="638" class="text" style="font-size: 11px;">POST /register</text>
  <text x="140" y="653" class="text" style="font-size: 11px;">POST /login</text>
  <text x="140" y="668" class="text" style="font-size: 11px;">GET /profile</text>

  <!-- decades.js route -->
  <rect x="260" y="590" width="200" height="85" class="box backend"/>
  <text x="360" y="618" class="text title">decades.js</text>
  <text x="360" y="638" class="text" style="font-size: 11px;">POST /api/generate-</text>
  <text x="360" y="653" class="text" style="font-size: 11px;">year-content</text>
  <text x="360" y="668" class="text" style="font-size: 11px;">â° Year: 1950-2025</text>

  <!-- chatbot.js route -->
  <rect x="490" y="590" width="180" height="85" class="box backend"/>
  <text x="580" y="618" class="text title">chatbot.js</text>
  <text x="580" y="638" class="text" style="font-size: 11px;">POST /api/chatbot</text>
  <text x="580" y="653" class="text" style="font-size: 11px;">Historical Q&A</text>
  <text x="580" y="668" class="text" style="font-size: 11px;">ğŸ¤– Context-aware</text>

  <!-- time capsule routes -->
  <rect x="700" y="590" width="180" height="85" class="box backend"/>
  <text x="790" y="618" class="text title">Time Capsule</text>
  <text x="790" y="638" class="text" style="font-size: 11px;">POST /create</text>
  <text x="790" y="653" class="text" style="font-size: 11px;">GET /user/:id</text>
  <text x="790" y="668" class="text" style="font-size: 11px;">ğŸ“¦ File Upload</text>

  <!-- community routes -->
  <rect x="910" y="590" width="180" height="85" class="box backend"/>
  <text x="1000" y="618" class="text title">Community</text>
  <text x="1000" y="638" class="text" style="font-size: 11px;">POST /posts</text>
  <text x="1000" y="653" class="text" style="font-size: 11px;">GET /posts/:year</text>
  <text x="1000" y="668" class="text" style="font-size: 11px;">ğŸ‘¥ Share Stories</text>

  <!-- Arrows to controllers/utils -->
  <path d="M 140 675 L 140 745" class="arrow"/>
  <path d="M 360 675 L 360 745" class="arrow"/>
  <path d="M 580 675 L 580 745" class="arrow"/>
  <path d="M 790 675 L 790 775" class="arrow"/>
  <path d="M 1000 675 L 1000 775" class="arrow"/>

  <!-- Layer 5: Business Logic -->
  <text x="700" y="735" class="text layer-title" style="fill: #9b59b6;">âš™ï¸ Business Logic Layer</text>

  <!-- authController -->
  <rect x="50" y="755" width="180" height="75" class="box backend"/>
  <text x="140" y="783" class="text title">authController.js</text>
  <text x="140" y="803" class="text" style="font-size: 11px;">JWT Generation</text>
  <text x="140" y="818" class="text" style="font-size: 11px;">ğŸ”’ Password Hashing</text>

  <!-- llmClient -->
  <rect x="260" y="755" width="240" height="75" class="box ai"/>
  <text x="380" y="783" class="text title">llmClient.js</text>
  <text x="380" y="803" class="text" style="font-size: 11px;">generateYearContent()</text>
  <text x="380" y="818" class="text" style="font-size: 11px;">ğŸ§  generateChatResponse()</text>

  <!-- ragHelper -->
  <rect x="530" y="755" width="180" height="75" class="box ai"/>
  <text x="620" y="783" class="text title">ragHelper.js</text>
  <text x="620" y="803" class="text" style="font-size: 11px;">Context Retrieval</text>
  <text x="620" y="818" class="text" style="font-size: 11px;">ğŸ“š JSON Data Loader</text>

  <!-- Middleware -->
  <rect x="740" y="755" width="180" height="75" class="box backend"/>
  <text x="830" y="783" class="text title">authMiddleware.js</text>
  <text x="830" y="803" class="text" style="font-size: 11px;">JWT Verification</text>
  <text x="830" y="818" class="text" style="font-size: 11px;">ğŸ›¡ï¸ Protected Routes</text>

  <!-- Azure Storage -->
  <rect x="950" y="755" width="180" height="75" class="box storage"/>
  <text x="1040" y="783" class="text title">Azure Blob</text>
  <text x="1040" y="803" class="text" style="font-size: 11px;">File Upload</text>
  <text x="1040" y="818" class="text" style="font-size: 11px;">â˜ï¸ Media Storage</text>

  <!-- Arrow to external AI -->
  <path d="M 380 830 L 380 920" class="arrow"/>
  <text x="400" y="880" class="label">API Call</text>

  <!-- Layer 6: External Services -->
  <text x="700" y="910" class="text layer-title" style="fill: #e6e6fa;">ğŸ¤– External Services</text>

  <!-- Google Gemini -->
  <rect x="260" y="930" width="240" height="105" class="box ai"/>
  <text x="380" y="958" class="text title">Google Gemini 2.0 Flash</text>
  <text x="380" y="978" class="text" style="font-size: 11px;">Year-specific content</text>
  <text x="380" y="993" class="text" style="font-size: 11px;">8 sections: Music, Events,</text>
  <text x="380" y="1008" class="text" style="font-size: 11px;">Fashion, Tech, Daily Life...</text>
  <text x="380" y="1023" class="text" style="font-size: 11px;">âœ¨ AI-Powered History</text>

  <!-- Supabase -->
  <rect x="530" y="930" width="200" height="105" class="box database"/>
  <text x="630" y="958" class="text title">Supabase</text>
  <text x="630" y="978" class="text" style="font-size: 11px;">PostgreSQL Database</text>
  <text x="630" y="993" class="text" style="font-size: 11px;">Real-time Subscriptions</text>
  <text x="630" y="1008" class="text" style="font-size: 11px;">Auth & RLS Policies</text>
  <text x="630" y="1023" class="text" style="font-size: 11px;">ğŸ”¥ Production Ready</text>

  <!-- Azure Blob detailed -->
  <rect x="950" y="930" width="180" height="85" class="box storage"/>
  <text x="1040" y="958" class="text title">Azure Blob Storage</text>
  <text x="1040" y="978" class="text" style="font-size: 11px;">ğŸµ Audio files</text>
  <text x="1040" y="993" class="text" style="font-size: 11px;">ğŸ¬ Video files</text>
  <text x="1040" y="1008" class="text" style="font-size: 11px;">ğŸ–¼ï¸ Images</text>

  <!-- Arrows to models -->
  <path d="M 140 830 L 140 1120" class="arrow"/>
  <path d="M 630 1035 L 630 1120" class="arrow"/>
  <path d="M 830 830 L 830 1120" class="arrow"/>
  <path d="M 1040 830 L 1040 1015" class="arrow"/>

  <!-- Layer 7: Database Layer -->
  <text x="700" y="1110" class="text layer-title" style="fill: #d8b2ff;">ğŸ’¾ Data Layer</text>

  <!-- Supabase Tables -->
  <rect x="350" y="1130" width="180" height="75" class="box database"/>
  <text x="440" y="1158" class="text title">Supabase Tables</text>
  <text x="440" y="1178" class="text" style="font-size: 11px;">users</text>
  <text x="440" y="1193" class="text" style="font-size: 11px;">time_capsules</text>

  <!-- MongoDB note -->
  <rect x="560" y="1130" width="180" height="75" class="box database"/>
  <text x="650" y="1158" class="text title">community_posts</text>
  <text x="650" y="1178" class="text" style="font-size: 11px;">Year-based sharing</text>
  <text x="650" y="1193" class="text" style="font-size: 11px;">ğŸŒ Global Stories</text>

  <!-- Models -->
  <rect x="770" y="1130" width="180" height="75" class="box database"/>
  <text x="860" y="1158" class="text title">Models</text>
  <text x="860" y="1178" class="text" style="font-size: 11px;">UserSupabase.js</text>
  <text x="860" y="1193" class="text" style="font-size: 11px;">TimeCapsuleSupabase.js</text>

  <!-- Arrows to actual database -->
  <path d="M 440 1205 L 440 1270" class="arrow"/>
  <path d="M 650 1205 L 650 1270" class="arrow"/>
  <path d="M 860 1205 L 860 1270" class="arrow"/>

  <!-- Layer 8: Physical Database -->
  <text x="700" y="1260" class="text layer-title" style="fill: #d8b2ff;">ğŸ—„ï¸ Database Storage</text>

  <!-- Supabase PostgreSQL -->
  <rect x="400" y="1280" width="400" height="100" class="box database"/>
  <text x="600" y="1308" class="text title">Supabase PostgreSQL (Cloud)</text>
  <text x="600" y="1328" class="text" style="font-size: 11px;">Project: fmubkjtgozaxeikqeflz</text>
  <text x="600" y="1343" class="text" style="font-size: 11px;">Tables: users, time_capsules, community_posts</text>
  <text x="600" y="1358" class="text" style="font-size: 11px;">âœ… Row Level Security Enabled</text>
  <text x="600" y="1373" class="text" style="font-size: 11px;">âœ… Production & Vercel Ready</text>

  <!-- Layer 9: Data Sources -->
  <text x="700" y="1420" class="text layer-title" style="fill: #b19cd9;">ğŸ“ Static Data Sources</text>

  <!-- JSON files -->
  <rect x="500" y="1440" width="200" height="85" class="box frontend"/>
  <text x="600" y="1468" class="text title">data/culture/*.json</text>
  <text x="600" y="1488" class="text" style="font-size: 11px;">Historical Context</text>
  <text x="600" y="1503" class="text" style="font-size: 11px;">1950-2020 Data</text>
  <text x="600" y="1518" class="text" style="font-size: 11px;">ğŸ“– RAG Context</text>

  <!-- Arrow back to ragHelper -->
  <path d="M 600 1440 L 620 830" class="arrow" style="stroke-dasharray: 5,5;"/>
  <text x="640" y="1150" class="label">Loads Context</text>

  <!-- User Flow Example -->
  <text x="700" y="1570" class="text layer-title" style="fill: #da70d6;">ğŸš€ Example User Flow</text>
  
  <rect x="50" y="1590" width="1300" height="190" style="fill: rgba(26, 11, 46, 0.8); stroke: #b19cd9; stroke-width: 2; stroke-dasharray: 5,5; rx: 15;"/>
  
  <text x="70" y="1620" class="text" style="text-anchor: start; fill: #e1d4ff; font-size: 12px;">
    1. ğŸŒŸ User visits index.html â†’ Clicks "Time Travel" â†’ second.html loads with 3D galaxy
  </text>
  <text x="70" y="1645" class="text" style="text-anchor: start; fill: #e1d4ff; font-size: 12px;">
    2. ğŸª User clicks year sphere (1973) â†’ Redirects to feed/1970s.html?year=1973
  </text>
  <text x="70" y="1670" class="text" style="text-anchor: start; fill: #e1d4ff; font-size: 12px;">
    3. âš¡ year-content-loader.js detects ?year=1973 â†’ Shows loading overlay
  </text>
  <text x="70" y="1695" class="text" style="text-anchor: start; fill: #e1d4ff; font-size: 12px;">
    4. ğŸ¤– POST /api/generate-year-content {year: 1973} â†’ llmClient.js calls Gemini 2.0 Flash
  </text>
  <text x="70" y="1720" class="text" style="text-anchor: start; fill: #e1d4ff; font-size: 12px;">
    5. âœ¨ AI generates JSON with 8 sections â†’ Returns to frontend â†’ year-content-loader.js updates DOM
  </text>
  <text x="70" y="1745" class="text" style="text-anchor: start; fill: #e1d4ff; font-size: 12px;">
    6. ğŸ“… User sees 1973-specific content: Music hits, Events, Fashion trends, Technology, Daily life
  </text>
  <text x="70" y="1770" class="text" style="text-anchor: start; fill: #e1d4ff; font-size: 12px;">
    7. ğŸ’¬ User can chat with historical bot, create time capsule, or explore other years
  </text>

</svg>